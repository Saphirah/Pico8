pico-8 cartridge // http://www.pico-8.com
version 32
__lua__

#include vector.p8

Map = {
    screens = vec2(4, 1),
    dimension = vec2(32, 8),
    spriteSize = 16,
    tiles = {
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1,
        1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1,
        1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1,
        1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    }
}

forceRedraw = true

function _init()

end

function _update60()

end

poke(0x5f36,1)
function _draw()
    if(forceRedraw) then
        cls()
        local offset = to2D(stat(3))
        for x = 0, 7 do
            for y = 0, 7 do
                cspr(Map.tiles[to1D(x + offset.x * 8, y + offset.y * 8)], x * 16, y * 16)
            end
        end
        forceRedraw = stat(3)<10
        return stat(3)<10
    end
end

function to2D(index)
    return vec2(index % Map.screens.x, flr(index / Map.screens.x))
end

function to1D(indexX, indexY)
    return indexY * Map.dimension.x + indexX + 1
end

function cspr(id, posX, posY)
    if(id != nil) then sspr(id * Map.spriteSize, 0, Map.spriteSize, Map.spriteSize, posX, posY) end
end

_camera = camera -- save original camera function reference
function camera(x,y)
    x = x or 0
    y = y or 0
    local dx=flr(stat(3) % Map.screens.x)
    local dy=flr(stat(3) / Map.screens.x)
    _camera(x+128*dx, y+128*dy)
end
__gfx__
44888888888888448844444444444488000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
48888888888888848444444444444448000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888884444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888884444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888884444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888884444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888884444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888884444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888884444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888884444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888884444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888884444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888884444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888884444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
48888888888888848444444444444448000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44888888888888448844444444444488000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
